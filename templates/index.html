{% extends "base.html" %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1>{{ config.extra.hero_title }}</h1>
                <p>{{ config.extra.hero_subtitle }}</p>
                <p style="font-size: 1.1rem; color: rgba(255, 255, 255, 0.8); font-weight: 500; margin-top: 1rem;">{{ config.extra.hero_tagline }}</p>
                
                <div class="hero-buttons">
                    <button onclick="openBetaModal()" class="btn-primary">
                        <i class="fas fa-{{ config.extra.hero_primary_button_icon }}"></i> {{ config.extra.hero_primary_button_text }}
                    </button>
                    {% if config.extra.hero_secondary_button_url is defined %}
                    <a href="{{ config.extra.hero_secondary_button_url }}" class="btn-secondary">
                        <i class="fas fa-{{ config.extra.hero_secondary_button_icon }}"></i> {{ config.extra.hero_secondary_button_text }}
                    </a>
                    {% endif %}
                </div>
               <!-- Beta Modal -->
               <div id="betaModal" class="modal" style="display: none;">
                   <div class="modal-content">
                       <span class="close" onclick="closeBetaModal()">&times;</span>
                       <form action="{{ config.extra.hero_primary_button_url }}" method="POST" class="beta-waitlist-form">
            <div class="form-header">
                <h3>Join Science Live Beta</h3>
                <p>Be among the first to experience the future of scientific collaboration</p>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <input type="text" name="name" placeholder="Your Name" required>
                </div>
                
                <div class="form-group">
                    <input type="email" name="email" placeholder="Email Address" required>
                </div>
                
                <div class="form-group full-width">
                    <input type="text" name="organization" placeholder="Organization/Institution (optional)">
                </div>
                
                <div class="form-group full-width">
                    <select name="role" required>
                        <option value="">Select your role</option>
                        <option value="researcher">Researcher</option>
                        <option value="data-scientist">Data Scientist</option>
                        <option value="rse-scientist">Research Software Engineer</option>
                        <option value="industry-professional">Industry Professional</option>
                        <option value="organisation-representative">Organization Representative</option>
                        <option value="research-funding-agency">Research Founding Agency</option>
                        <option value="student">Student</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group full-width">
                    <textarea name="interest" placeholder="What interests you most about Science Live? (optional)" rows="3"></textarea>
                </div>
            </div>
            
            <button type="submit" class="btn-primary form-submit">
                <i class="fas fa-rocket"></i> {{ config.extra.hero_primary_button_text }}
            </button>

            <!-- Hidden fields for Formspree -->
            <input type="hidden" name="_next" value="https://sciencelive4all.org/thank-you">
            <input type="hidden" name="_subject" value="New Science Live Beta Signup">
        </form>


                       </form>
                   </div>
                </div>

                <div class="hero-stats">
                    {% for stat in config.extra.hero_stats %}
                    <div class="stat">
                        <div class="stat-value">{{ stat.value }}</div>
                        <div class="stat-label">{{ stat.label }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
<div class="hero-visual">
    <div class="video-wrapper">
        <iframe width="640" height="360" 
                src="https://www.youtube.com/embed/KBL9kcTPYRA" 
                title="Science Live Introduction" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                allowfullscreen>
        </iframe>
    </div>
</div>

        </div>
    </section>

    <!-- Three Pillars Section -->
    <section class="three-pillars-section">
        <div class="pillars-container">
            <div class="section-header">
                <div class="section-tag">{{ config.extra.features_section_tag }}</div>
                <h2 class="section-title">{{ config.extra.features_section_title }}</h2>
            </div>
            <div class="pillars-grid">
                {% for feature in config.extra.features %}
                <div class="pillar-card">
                    <div class="pillar-icon">
                        <i class="fas fa-{{ feature.icon }}"></i>
                    </div>
                    <h3 class="pillar-title">{{ feature.title }}</h3>
                    <p class="pillar-description">{{ feature.description }}</p>
                    <a href="{{ feature.link }}" class="pillar-link">
                        {{ feature.link_text }} <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
            
            <!-- Building Blocks Visual -->
            <div class="building-blocks-visual">


                <h3>{{ config.extra.visual_blocks.title }}</h3>
                <div class="blocks-diagram">
                    <div class="research-block methods">
                        <i class="fas fa-cogs"></i>
                        <span>Methods</span>
                    </div>
                    <div class="research-block data">
                        <i class="fas fa-database"></i>
                        <span>Data</span>
                    </div>
                    <div class="research-block claims">
                        <i class="fas fa-lightbulb"></i>
                        <span>Claims</span>
                    </div>
                    <div class="research-block code">
                        <i class="fas fa-code"></i>
                        <span>Code</span>
                    </div>
                    <div class="research-block reviews">
                        <i class="fas fa-comments"></i>
                        <span>Discussions</span>
                    </div>
                </div>
                <p class="blocks-caption">{{ config.extra.visual_blocks.description }}</p>
            </div>
        </div>
    </section>


    <!-- For Researchers Section -->
    <section class="audience-section researchers" id="researchers">
        <div class="audience-container">
            <div class="audience-content">
                <div class="audience-icon">
                    <i class="fas fa-chalkboard-user"></i>
                </div>
                <h2>{{ config.extra.researchers.title }}</h2>
                <h3>{{ config.extra.researchers.subtitle }}</h3>
                <p>{{ config.extra.researchers.description }}</p>
                
                <!-- Two Primary Benefits -->
                <div class="primary-benefits">
                    {% for benefit in config.extra.researchers.primary_benefits %}
                    <div class="primary-benefit">
                        <div class="benefit-header">
                            <h4>{{ benefit.title }}</h4>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <!-- Three Secondary Benefits -->
                <div class="secondary-benefits">
                    {% for benefit in config.extra.researchers.secondary_benefits %}
                    <div class="secondary-benefit">
                        <div class="benefit-header">
                            <h5>{{ benefit.title }}</h5>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <div class="pricing-highlight">
                    <div class="pricing-tier">
                        <h4>Individuals</h4>
                        <div class="price">{{ config.extra.researchers.price }}<span>{{ config.extra.researchers.price_period }}</span></div>
                        <p>{{ config.extra.researchers.price_description }}</p>
                    </div>
                </div>

                <div class="audience-cta">
                    <a href="{{ config.extra.researchers.cta_url }}" class="btn-audience">{{ config.extra.researchers.cta_text }}</a>
                </div>
            </div>
        </div>
    </section>

    <!-- For Organizations Section -->
    <section class="audience-section organizations" id="organizations">
        <div class="audience-container">
            <div class="audience-content">
                <div class="audience-icon">
                    <i class="fas fa-university"></i>
                </div>
                <h2>{{ config.extra.organizations.title }}</h2>
                <h3>{{ config.extra.organizations.subtitle }}</h3>
                <p>{{ config.extra.organizations.description }}</p>
                
                <!-- Two Primary Benefits -->
                <div class="primary-benefits">
                    {% for benefit in config.extra.organizations.primary_benefits %}
                    <div class="primary-benefit">
                        <div class="benefit-header">
                            <h4>{{ benefit.title }}</h4>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <!-- Three Secondary Benefits -->
                <div class="secondary-benefits">
                    {% for benefit in config.extra.organizations.secondary_benefits %}
                    <div class="secondary-benefit">
                        <div class="benefit-header">
                            <h5>{{ benefit.title }}</h5>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <div class="pricing-highlight">
                    <div class="pricing-tier">
                        <h4>Academic Organizations</h4>
                        <div class="price">{{ config.extra.organizations.price }}<span>{{ config.extra.organizations.price_period }}</span></div>
                        <p>{{ config.extra.organizations.price_description }}</p>
                    </div>
                </div>

                <div class="audience-cta">
                    <a href="{{ config.extra.organizations.cta_url }}" class="btn-audience">{{ config.extra.organizations.cta_text }}</a>
                </div>
            </div>
        </div>
    </section>

    <!-- For Industry Section -->
    <section class="audience-section industry" id="industry">
        <div class="audience-container">
            <div class="audience-content">
                <div class="audience-icon">
                    <i class="fas fa-handshake"></i>
                </div>
                <h2>{{ config.extra.industry.title }}</h2>
                <h3>{{ config.extra.industry.subtitle }}</h3>
                <p>{{ config.extra.industry.description }}</p>
                
                <!-- Two Primary Benefits -->
                <div class="primary-benefits">
                    {% for benefit in config.extra.industry.primary_benefits %}
                    <div class="primary-benefit">
                        <div class="benefit-header">
                            <h4>{{ benefit.title }}</h4>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <!-- Three Secondary Benefits -->
                <div class="secondary-benefits">
                    {% for benefit in config.extra.industry.secondary_benefits %}
                    <div class="secondary-benefit">
                        <div class="benefit-header">
                            <h5>{{ benefit.title }}</h5>
                        </div>
                        <p>{{ benefit.description }}</p>
                    </div>
                    {% endfor %}
                </div>

                <div class="pricing-highlight">
                    <div class="pricing-tier">
                        <h4>Commercial Organizations</h4>
                        <div class="price">{{ config.extra.industry.price }}<span>{{ config.extra.industry.price_period }}</span></div>
                        <p>{{ config.extra.industry.price_description }}</p>
                    </div>
                </div>

                <div class="audience-cta">
                    <a href="{{ config.extra.industry.cta_url }}" class="btn-audience">{{ config.extra.industry.cta_text }}</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Credit System & Travel Fund Section -->
    <section class="credit-system" id="travel-fund">
        <div class="credit-container">
            <div class="credit-header">
                <h2>{{ config.extra.credit_system.title }}</h2>
                <p>{{ config.extra.credit_system.subtitle }}</p>
            </div>

            <!-- Three Panel Structure -->
            <div class="three-panel-grid">
                <!-- Panel 1: Always Free -->
                <div class="credit-panel panel-free">
                    <div class="panel-header">
                        <i class="fas fa-unlock panel-icon"></i>
                        <h3>{{ config.extra.panel_free.title }}</h3>
                        <h4>{{ config.extra.panel_free.subtitle }}</h4>
                        <p>{{ config.extra.panel_free.description }}</p>
                    </div>
                    <div class="panel-features">
                        {% for feature in config.extra.panel_free.features %}
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>{{ feature.text }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="panel-footer">
                        <div class="panel-price">Always Free</div>
                    </div>
                </div>

                <!-- Panel 2: Travel Fund -->
                <div class="credit-panel panel-travel featured">
                    <div class="panel-badge">Merit-Based</div>
                    <div class="panel-header">
                        <i class="fas fa-exchange panel-icon"></i>
                        <h3>{{ config.extra.panel_travel.title }}</h3>
                        <h4>{{ config.extra.panel_travel.subtitle }}</h4>
                        <p>{{ config.extra.panel_travel.description }}</p>
                        <div class="requirement">{{ config.extra.panel_travel.requirement }}</div>
                    </div>
                    <div class="panel-features">
                        {% for feature in config.extra.panel_travel.features %}
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>{{ feature.text }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="panel-footer">
                        <div class="panel-price">Unlock Through Contributions</div>
                    </div>
                </div>

                <!-- Panel 3: Organizational Subscriptions -->
                <div class="credit-panel panel-subscriptions">
                    <div class="panel-header">
                        <i class="fas fa-building panel-icon"></i>
                        <h3>{{ config.extra.panel_subscriptions.title }}</h3>
                        <h4>{{ config.extra.panel_subscriptions.subtitle }}</h4>
                        <p>{{ config.extra.panel_subscriptions.description }}</p>
                    </div>
                    <div class="subscription-tiers">
                        {% for tier in config.extra.panel_subscriptions.tiers %}
                        <div class="tier-card">
                            <h5>{{ tier.name }}</h5>
                            <div class="tier-price">
                                <span class="price">{{ tier.price }}</span>
                                <span class="period">{{ tier.period }}</span>
                            </div>
                            <p class="tier-description">{{ tier.description }}</p>
                            <div class="tier-features">
                                {% for feature in tier.features %}
                                <div class="feature-item small">
                                    <i class="fas fa-check"></i>
                                    <span>{{ feature }}</span>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Credit System Explanation -->
            <div class="credit-explanation">
                <h3>How the Credit System Works</h3>
                <p>{{ config.extra.credit_system_explanation }}</p>
                
                <div class="transparency-example">
                    <h4>Current Status ({{ config.extra.last_updated }}):</h4>
                    <div class="transparency-grid">
                        <div class="transparency-item">
                            <strong>Fund Balance:</strong> {{ config.extra.current_fund_balance }}
                        </div>
                        <div class="transparency-item">
                            <strong>Credits Earned:</strong> {{ config.extra.total_credits_earned }}
                        </div>
                        <div class="transparency-item">
                            <strong>Credit Value:</strong> {{ config.extra.current_credit_value }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Credit Earning Activities -->
            <div class="credit-earning-section">
                <h3>Earn Credits Through Quality Knowledge Bricks</h3>
                <div class="credit-activities">
                    {% for activity in config.extra.credit_earning %}
                    <div class="credit-activity">
                        <span class="credits">{{ activity.credits }} credits</span>
                        <span class="activity">{{ activity.activity }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </section>

<!-- Timeline Section -->
{% if config.extra.timeline is defined %}
<section class="timeline-section" id="timeline">
    <div class="timeline-container">
        <div class="timeline-header">
            <h2>{{ config.extra.timeline.title }}</h2>
            <p>{{ config.extra.timeline.subtitle }}</p>
        </div>
        <div class="timeline">
            {% for item in config.extra.timeline.items %}
            <div class="timeline-item {{ item.status }}">
                <div class="timeline-marker">
                    {% if item.status == "completed" %}
                    <i class="fas fa-check"></i>
                    {% elif item.status == "current" %}
                    <i class="fas fa-play"></i>
                    {% else %}
                    <i class="fas fa-clock"></i>
                    {% endif %}
                </div>
                <div class="timeline-content">
                    <div class="timeline-period">{{ item.period }}</div>
                    <h3>{{ item.title }}</h3>
                    <p>{{ item.description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Team Section -->
{% if config.extra.team is defined %}
<section class="team-section" id="team">
    <div class="team-container">
        <div class="team-header">
            <h2>{{ config.extra.team.title }}</h2>
            <p>{{ config.extra.team.subtitle }}</p>
        </div>
        
        <!-- Team Members -->
        <div class="team-members">
            {% for member in config.extra.team.members %}
            <div class="team-member">
                <h3>{{ member.name }}</h3>
                <h4>{{ member.title }}</h4>
                <p>{{ member.description }}</p>
                <div class="member-org">{{ member.organization }}</div>
            </div>
            {% endfor %}
        </div>

        <!-- Hiring Section -->
        {% if config.extra.team.hiring is defined %}
        <div class="hiring-section">
            <h3>{{ config.extra.team.hiring.title }}</h3>
            <p>{{ config.extra.team.hiring.description }}</p>
            <div class="open-positions">
                {% for position in config.extra.team.hiring.positions %}
                <div class="position-item">
                    <i class="fas fa-briefcase"></i>
                    <span>{{ position }}</span>
                </div>
                {% endfor %}
            </div>
            <div class="hiring-cta">
               <button onclick="openContactModal()" class="btn-hiring">{{ config.extra.team.hiring.cta_text }}</button>
            </div>  

        </div>
        {% endif %}

        <!-- Institutional Backing -->
        {% if config.extra.team.backing is defined %}
        <div class="backing-section">
            <h3>{{ config.extra.team.backing.title }}</h3>
            <p>{{ config.extra.team.backing.description }}</p>
        </div>
        {% endif %}
    </div>
</section>
{% endif %}
<!-- CTA Section -->
<section class="cta">
    <div class="features-container">
        <h2>{{ config.extra.cta_title }}</h2>
        <p>{{ config.extra.cta_subtitle }}</p>
        <div class="cta-buttons">
            <a href="{{ config.extra.cta_primary_button_url }}" class="btn-cta">
                <i class="fas fa-{{ config.extra.cta_primary_button_icon }}"></i> {{ config.extra.cta_primary_button_text }}
            </a>
            <button onclick="openContactModal()" class="btn-cta-secondary">
                <i class="fas fa-{{ config.extra.cta_secondary_button_icon }}"></i> {{ config.extra.cta_secondary_button_text }}
            </button>
        </div>
    </div>
</section>

<!-- Contact Modal -->
<div id="contactModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeContactModal()">&times;</span>
        <form action="https://formspree.io/f/mwpndawr" method="POST" class="beta-waitlist-form">
            <div class="form-header">
                <h3>Contact Us</h3>
                <p>Get in touch to discuss your needs or learn more about Science Live</p>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <input type="text" name="name" placeholder="Your Name" required>
                </div>
                
                <div class="form-group">
                    <input type="email" name="email" placeholder="Email Address" required>
                </div>
                
                <div class="form-group full-width">
                    <input type="text" name="organization" placeholder="Organization/Institution (optional)">
                </div>
                
                <div class="form-group full-width">
                    <select name="inquiry_type">
                        <option value="">What can we help you with?</option>
                        <option value="general">General Inquiry</option>
                        <option value="demo">Request Demo</option>
                        <option value="partnership">Partnership Opportunity</option>
                        <option value="media">Media/Press</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group full-width">
                    <textarea name="message" placeholder="Your message" rows="4" required></textarea>
                </div>
            </div>
            
            <button type="submit" class="btn-primary form-submit">
                <i class="fas fa-paper-plane"></i> Send Message
            </button>

            <!-- Hidden fields for Formspree -->
            <input type="hidden" name="_next" value="https://sciencelive4all.org/thank-you">
            <input type="hidden" name="_subject" value="New Contact Message from Science Live">
        </form>
    </div>
</div>

{% endblock content %}

{% block extra_js %}
<script>
function loadVideo() {
  const container = document.getElementById('videoContainer');
  
  // Create video element
  const video = document.createElement('video');
  video.width = 640;
  video.height = 640;
  video.controls = true;
  video.autoplay = true;
  video.muted = true;
  video.playsInline = true;

  // Add source
  const source = document.createElement('source');
  source.src = "https://raw.githubusercontent.com/ScienceLiveHub/ideas-discussions/main/Science_Live_NotebookLM.mp4";
  source.type = "video/mp4";
  video.appendChild(source);

  // When video ends, restore preview image
  video.onended = function () {
    container.innerHTML = `<img src="assets/img/science-live-main.png" width="640" height="640" style="cursor:pointer;" onclick="loadVideo()">`;
  };

  // Replace preview image with video
  container.innerHTML = '';
  container.appendChild(video);
}

// Animate elements on scroll
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Apply animation to feature cards and process steps
document.querySelectorAll('.pillar-card, .researcher-pillar, .benefit-card, .research-block').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
});

// Animate building blocks with stagger
const blocks = document.querySelectorAll('.research-block');
blocks.forEach((block, index) => {
    setTimeout(() => {
        block.style.opacity = '1';
        block.style.transform = 'translateY(0)';
    }, index * 200);
});
// Beta form modal functions
function openBetaModal() {
    document.getElementById('betaModal').style.display = 'flex';
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
}

function closeBetaModal() {
    document.getElementById('betaModal').style.display = 'none';
    document.body.style.overflow = 'auto'; // Re-enable scrolling
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('betaModal');
    if (event.target == modal) {
        closeBetaModal();
    }
}

// Contact form modal functions
function openContactModal() {
    document.getElementById('contactModal').style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeContactModal() {
    document.getElementById('contactModal').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Update the window click handler to handle both modals
window.onclick = function(event) {
    const betaModal = document.getElementById('betaModal');
    const contactModal = document.getElementById('contactModal');
    
    if (event.target == betaModal) {
        closeBetaModal();
    }
    if (event.target == contactModal) {
        closeContactModal();
    }
}
</script>
{% endblock extra_js %}
